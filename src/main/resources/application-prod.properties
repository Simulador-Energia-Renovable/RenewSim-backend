# =============================
# DATASOURCE (PostgreSQL - Render)
# =============================
spring.datasource.url=jdbc:postgresql://${SPRING_DATASOURCE_HOST}:${SPRING_DATASOURCE_PORT}/${SPRING_DATASOURCE_DB}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# =============================
# JPA / Hibernate (producción)
# =============================
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
# En prod es mejor "validate" para no tocar el esquema automáticamente.
spring.jpa.hibernate.ddl-auto=validate
# Evita logs de SQL en prod
spring.jpa.show-sql=false
spring.jpa.open-in-view=false

# =============================
# HikariCP (Connection Pool)
# =============================
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.connection-timeout=30000

# =============================
# SERVER / Proxy (Render)
# =============================
# Respeta X-Forwarded-* de Render para URLs correctas detrás de proxy
server.forward-headers-strategy=framework

# =============================
# LOGGING
# =============================
logging.level.org.springframework.security=WARN

# =============================
# ACTUATOR (exposición mínima)
# =============================
management.endpoints.web.exposure.include=health,info
management.endpoint.health.probes.enabled=true

# =============================
# CORS (dominios permitidos en prod)
# =============================
# Si gestionas CORS por propiedades, usa lista separada por coma.
cors.allowed-origins=https://renewsim.example.com

# =============================
# JWT (Fase 1 — claims estándar, HS256)
# =============================
# Usa SIEMPRE secretBase64 en PROD (mínimo 256 bits = 32 bytes).
security.jwt.issuer=renewsim-auth
security.jwt.audience=renewsim-app
security.jwt.secretBase64=${JWT_SECRET_BASE64}   # <-- definir en Render Dashboard
security.jwt.expiration-seconds=3600
security.jwt.not-before-skew-seconds=0
security.jwt.allowed-clock-skew-seconds=60



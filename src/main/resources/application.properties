spring:
  profiles:
    active: dev  # por defecto en local

# =============================
# JWT CONFIG (común)
# =============================
security:
  jwt:
    issuer: renewsim-auth
    audience: renewsim-app
    # Si usas HS256 con clave en BASE64, usa secretBase64 y decódificala.
    # Si prefieres texto plano (>= 32B), usa "secret" directamente.
    secretBase64: ${JWT_SECRET_BASE64:}    # recomendado en entornos reales
    secret: ${JWT_SECRET_PLAINTEXT:}       # alternativa para local/testing (>=32B)
    expiration-seconds: 3600               # exp
    not-before-skew-seconds: 0             # nbf = now (+skew opcional)
    allowed-clock-skew-seconds: 60         # tolerancia para iat/nbf/exp en parsers

# =============================
# AUTH SCOPES (YamlScopePolicy)
# =============================
auth:
  roleScopes:
    USER:
      - read:simulations
      - write:simulations
      - compare:simulations
    ADMIN:
      - read:simulations
      - write:simulations
      - compare:simulations
      - export:simulations
      - delete:simulations
      - read:users
      - manage:users
 # =============================
 # RATE LIMITING (Brute-force guard)
 # =============================
  rate-limiting:
    enabled: true                # on/off global
    strategy: IP_USER            # IP | IP_USER (recomendada para login)
    max-attempts: 5              # N intentos permitidos en la ventana
    window-seconds: 60           # T (segundos) de la ventana fija
    retry-after-seconds: 60      # sugerencia al cliente para reintentar
    login-path: /api/v1/auth/login     

# =============================
# CORS CONFIG
# =============================
cors:
  allowed-origins:
    - http://localhost:5173
    - https://renewsim.example.com

# =============================
# LOGGING
# =============================
logging:
  level:
    org.springframework.security: INFO

# =============================
# ACTUATOR
# =============================
management:
  endpoints:
    web:
      exposure:
        include: health,info






